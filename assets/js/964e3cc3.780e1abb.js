"use strict";(self.webpackChunkpendle_documentation=self.webpackChunkpendle_documentation||[]).push([[4498],{3905:(a,e,t)=>{t.d(e,{Zo:()=>p,kt:()=>N});var n=t(7294);function r(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}function s(a,e){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),t.push.apply(t,n)}return t}function l(a){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?s(Object(t),!0).forEach((function(e){r(a,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(t,e))}))}return a}function i(a,e){if(null==a)return{};var t,n,r=function(a,e){if(null==a)return{};var t,n,r={},s=Object.keys(a);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||(r[t]=a[t]);return r}(a,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(r[t]=a[t])}return r}var m=n.createContext({}),o=function(a){var e=n.useContext(m),t=e;return a&&(t="function"==typeof a?a(e):l(l({},e),a)),t},p=function(a){var e=o(a.components);return n.createElement(m.Provider,{value:e},a.children)},c="mdxType",h={inlineCode:"code",wrapper:function(a){var e=a.children;return n.createElement(n.Fragment,{},e)}},k=n.forwardRef((function(a,e){var t=a.components,r=a.mdxType,s=a.originalType,m=a.parentName,p=i(a,["components","mdxType","originalType","parentName"]),c=o(t),k=r,N=c["".concat(m,".").concat(k)]||c[k]||h[k]||s;return t?n.createElement(N,l(l({ref:e},p),{},{components:t})):n.createElement(N,l({ref:e},p))}));function N(a,e){var t=arguments,r=e&&e.mdxType;if("string"==typeof a||r){var s=t.length,l=new Array(s);l[0]=k;var i={};for(var m in e)hasOwnProperty.call(e,m)&&(i[m]=e[m]);i.originalType=a,i[c]="string"==typeof a?a:r,l[1]=i;for(var o=2;o<s;o++)l[o]=t[o];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},8847:(a,e,t)=>{t.r(e),t.d(e,{assets:()=>m,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>o});var n=t(7462),r=(t(7294),t(3905));const s={hide_table_of_contents:!0},l="LP as Collateral in a Money Market",i={unversionedId:"Developers/Integration/LPAsCollateral",id:"Developers/Integration/LPAsCollateral",title:"LP as Collateral in a Money Market",description:"Pendle pools' LP tokens are good collaterals in a money market since it is a yield bearing position on the asset. This document discusses the use cases for LP as a collateral, as well as considerations for a money market when integrating LP as a collateral.",source:"@site/docs/Developers/Integration/LPAsCollateral.md",sourceDirName:"Developers/Integration",slug:"/Developers/Integration/LPAsCollateral",permalink:"/Developers/Integration/LPAsCollateral",draft:!1,tags:[],version:"current",frontMatter:{hide_table_of_contents:!0},sidebar:"myAutogeneratedSidebar",previous:{title:"PT as Collateral in a Money Market",permalink:"/Developers/Integration/PTAsCollateral"},next:{title:"Price Impact Calculation for Liquidating PT and LP",permalink:"/Developers/Integration/PriceImpactCalculation"}},m={},o=[{value:"Main Use Cases",id:"main-use-cases",level:2},{value:"1. Leverage farming",id:"1-leverage-farming",level:4},{value:"2. Leverage long assets while earning yields on Pendle",id:"2-leverage-long-assets-while-earning-yields-on-pendle",level:4},{value:"Integrating LP as a collateral in a money market",id:"integrating-lp-as-a-collateral-in-a-money-market",level:2},{value:"1. Reliable oracle for LP price:",id:"1-reliable-oracle-for-lp-price",level:4},{value:"2. Liquidation of Pendle LP:",id:"2-liquidation-of-pendle-lp",level:4},{value:"3. Handling of Pendle LP&#39;s rewards:",id:"3-handling-of-pendle-lps-rewards",level:4},{value:"Risk analysis for LP as a collateral",id:"risk-analysis-for-lp-as-a-collateral",level:2},{value:"1. Smart contract vulnerability in Pendle contracts:",id:"1-smart-contract-vulnerability-in-pendle-contracts",level:3},{value:"2. Smart contract vulnerability in underlying protocols:",id:"2-smart-contract-vulnerability-in-underlying-protocols",level:3},{value:"3. Oracle exploit:",id:"3-oracle-exploit",level:3},{value:"4. Insufficient LP liquidity for liquidation in a short duration",id:"4-insufficient-lp-liquidity-for-liquidation-in-a-short-duration",level:3},{value:"How to check price impact for selling LP",id:"how-to-check-price-impact-for-selling-lp",level:5},{value:"5. Highly volatile LP price could liquidate users unnessarily",id:"5-highly-volatile-lp-price-could-liquidate-users-unnessarily",level:3}],p={toc:o},c="wrapper";function h(a){let{components:e,...t}=a;return(0,r.kt)(c,(0,n.Z)({},p,t,{components:e,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"lp-as-collateral-in-a-money-market"},"LP as Collateral in a Money Market"),(0,r.kt)("p",null,"Pendle pools' LP tokens are good collaterals in a money market since it is a yield bearing position on the asset. This document discusses the use cases for LP as a collateral, as well as considerations for a money market when integrating LP as a collateral."),(0,r.kt)("h2",{id:"main-use-cases"},"Main Use Cases"),(0,r.kt)("h4",{id:"1-leverage-farming"},"1. Leverage farming"),(0,r.kt)("p",null,"Example: LP-stETH gives a 12% APY, but the ETH borrow rate is only 3% in the money market."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"In this case, a user can deposit LP-stETH as collateral, borrow ETH, swap borrowed ETH to more LP-stETH to use as more collateral, and so on."),(0,r.kt)("li",{parentName:"ul"},"As a result, the user will get a leveraged APY in ETH terms, benefiting from the difference between the Pendle LP APY and ETH borrow rate"),(0,r.kt)("li",{parentName:"ul"},"If the collateral factor is 0.80, the user can leverage 5x their capital to get a maximum APY of 5 * (12-3) = 45%")),(0,r.kt)("p",null,"This use case is similar to depositing a yield bearing asset like wstETH and borrowing (ETH) in a money market."),(0,r.kt)("h4",{id:"2-leverage-long-assets-while-earning-yields-on-pendle"},"2. Leverage long assets while earning yields on Pendle"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If a user is bullish on an asset in the long term, they can use its Pendle LP as a collateral to borrow stables to buy more LP"),(0,r.kt)("li",{parentName:"ul"},"For example, a long term ETH holder can use LP-stETH as collateral to borrow USDC to buy more LP-stETH"),(0,r.kt)("li",{parentName:"ul"},"Essentially, the user will be getting a good returns from the Pendle LP position on top of their leveraged long position on ETH.")),(0,r.kt)("h2",{id:"integrating-lp-as-a-collateral-in-a-money-market"},"Integrating LP as a collateral in a money market"),(0,r.kt)("p",null,"There are three considerations when integrating Pendle LPs as a collateral in a money market:"),(0,r.kt)("h4",{id:"1-reliable-oracle-for-lp-price"},"1. Reliable oracle for LP price:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"There is a permission-less oracle system for Pendle LPs that allows for querying TWAP prices for customised durations."),(0,r.kt)("li",{parentName:"ul"},"Please refer to ",(0,r.kt)("a",{parentName:"li",href:"/Developers/Integration/LPOracle"},"this page")," for the oracle documentations.")),(0,r.kt)("h4",{id:"2-liquidation-of-pendle-lp"},"2. Liquidation of Pendle LP:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"When a liquidation with ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"L"),(0,r.kt)("mi",{parentName:"mrow"},"P")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"LP")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"L"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P")))))," as collateral occurs, commonly, the liquidator will have to sell ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"L"),(0,r.kt)("mi",{parentName:"mrow"},"P")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"LP")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"L"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P")))))," into common asset to pay their debt."),(0,r.kt)("li",{parentName:"ul"},"In Pendle's system, we support converting ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"L"),(0,r.kt)("mi",{parentName:"mrow"},"P")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"LP")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"L"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P")))))," back to ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y")))))," by removing liquidity single-sided into ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y")))))," on our AMM (before maturity) or redeeming ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"P"),(0,r.kt)("mi",{parentName:"mrow"},"T")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"PT")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T")))))," + ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y")))))," and redeeming ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"P"),(0,r.kt)("mi",{parentName:"mrow"},"T")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"PT")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"T")))))," to ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y")))))," directly from ",(0,r.kt)("inlineCode",{parentName:"li"},"PendleYieldToken")," contract (post maturity). This will then allow the liquidator to redeem their ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y")))))," into one of the output token of ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"S"),(0,r.kt)("mi",{parentName:"mrow"},"Y")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"SY")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.05764em"}},"S"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.22222em"}},"Y")))))," (see ",(0,r.kt)("a",{parentName:"li",href:"https://eips.ethereum.org/EIPS/eip-5115"},"EIP-5115"),")."),(0,r.kt)("li",{parentName:"ul"},"For reference, we have written the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/pendle-finance/pendle-core-v2-public/blob/main/contracts/offchain-helpers/BoringLpSeller.sol"},(0,r.kt)("inlineCode",{parentName:"a"},"BoringLpSeller"))," contract to sell ",(0,r.kt)("span",{parentName:"li",className:"math math-inline"},(0,r.kt)("span",{parentName:"span",className:"katex"},(0,r.kt)("span",{parentName:"span",className:"katex-mathml"},(0,r.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,r.kt)("semantics",{parentName:"math"},(0,r.kt)("mrow",{parentName:"semantics"},(0,r.kt)("mi",{parentName:"mrow"},"L"),(0,r.kt)("mi",{parentName:"mrow"},"P")),(0,r.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"LP")))),(0,r.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,r.kt)("span",{parentName:"span",className:"base"},(0,r.kt)("span",{parentName:"span",className:"strut",style:{height:"0.68333em",verticalAlign:"0em"}}),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal"},"L"),(0,r.kt)("span",{parentName:"span",className:"mord mathnormal",style:{marginRight:"0.13889em"}},"P")))))," into one of SY's output tokens."),(0,r.kt)("li",{parentName:"ul"},"You can extend this abstract contract to use in a liquidation system.")),(0,r.kt)("h4",{id:"3-handling-of-pendle-lps-rewards"},"3. Handling of Pendle LP's rewards:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Holding Pendle LP tokens will generate PENDLE incentives and potential reward tokens (like WETH for LP for GLP pool)"),(0,r.kt)("li",{parentName:"ul"},"The money market contracts will need to redeem these rewards by calling the ",(0,r.kt)("inlineCode",{parentName:"li"},"redeemRewards")," function and implement logic to distribute these rewards to their users")),(0,r.kt)("h2",{id:"risk-analysis-for-lp-as-a-collateral"},"Risk analysis for LP as a collateral"),(0,r.kt)("h3",{id:"1-smart-contract-vulnerability-in-pendle-contracts"},"1. Smart contract vulnerability in Pendle contracts:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"This is similar to the analysis in the ",(0,r.kt)("a",{parentName:"li",href:"/Developers/Integration/PTAsCollateral#1-smart-contract-vulnerability-in-pendle-contracts"},"risk analysis for PT as a collateral"))),(0,r.kt)("h3",{id:"2-smart-contract-vulnerability-in-underlying-protocols"},"2. Smart contract vulnerability in underlying protocols:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"This is similar to the analysis in the ",(0,r.kt)("a",{parentName:"li",href:"/Developers/Integration/PTAsCollateral#2-smart-contract-vulnerability-in-underlying-protocols"},"risk analysis for PT as a collateral"))),(0,r.kt)("h3",{id:"3-oracle-exploit"},"3. Oracle exploit:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If the oracle for LP price is easily manipulated or exploited, LP price could inflate unnaturally (leading to an attack of using over-priced LP to borrow, and get away with free money leading to bad protocol debt after LP price drops sharply after), or drops sharply (leading to bad debt for the protocol)"),(0,r.kt)("li",{parentName:"ul"},"Assessment:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Pendle's oracle for LP/asset builds on top of the PT/asset oracle. The PT/asset oracle is permissionless and built into the contract (no maintanance needed), hence liveness and correctness is not a concern."),(0,r.kt)("li",{parentName:"ul"},"The LP/asset oracle returns TWAP prices for any customisable duration (within 65536 blocks, which is ~9 days for Ethereum), hence is not susceptible to short term or within-a-block manipulation of prices if the TWAP duration used is sufficient."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Important note"),":",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"You should only use the current LP oracle is the ",(0,r.kt)("inlineCode",{parentName:"li"},"SY")," contract doesn't have a callback function. If the ",(0,r.kt)("inlineCode",{parentName:"li"},"SY")," contract has a callback function, it is technically possible for the oracle to return an incorrect LP price, if it's called inside a SY's callback function. "),(0,r.kt)("li",{parentName:"ul"},"It should be very rare to have a SY with a callback function. If you do integrate with one, you can contact us. We can deploy a specialised oracle to deal with a SY with a call back function.")))))),(0,r.kt)("h3",{id:"4-insufficient-lp-liquidity-for-liquidation-in-a-short-duration"},"4. Insufficient LP liquidity for liquidation in a short duration"),(0,r.kt)("p",null,"The considerations for this part is the same as the ones for integrating PT as collateral ",(0,r.kt)("a",{parentName:"p",href:"/Developers/Integration/PTAsCollateral#4-insufficient-pt-liquidity-for-liquidation-in-a-short-duration"},"here"),"."),(0,r.kt)("p",null,"The difference between LP and PT is just that LP prices fluctuate less than PT prices (because LP = PT + SY). Therefore, with the same pool, the parameters for supporting LP as a collateral could more more aggressive than that for supporting PT as a collateral."),(0,r.kt)("h5",{id:"how-to-check-price-impact-for-selling-lp"},"How to check price impact for selling LP"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You can follow the instructions ",(0,r.kt)("a",{parentName:"li",href:"/Developers/Integration/PriceImpactCalculation"},"here")," to check the price impact for selling a certain amount of LP")),(0,r.kt)("h3",{id:"5-highly-volatile-lp-price-could-liquidate-users-unnessarily"},"5. Highly volatile LP price could liquidate users unnessarily"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"This is similar to the analysis in the ",(0,r.kt)("a",{parentName:"li",href:"/Developers/Integration/PTAsCollateral#5-highly-volatile-pt-price-could-liquidate-users-unnessarily"},"risk analysis for PT as a collateral"))))}h.isMDXComponent=!0}}]);